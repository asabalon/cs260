{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block page_title %}
    Login
{% endblock %}

{% block page_panel %}
    <div class="container">
        <style>
            * {
                -webkit-box-sizing: border-box;
                -moz-box-sizing: border-box;
                box-sizing: border-box;
                outline: none;
            }

            .form-control {
                position: relative;
                font-size: 16px;
                height: auto;
                padding: 10px;
            @include box-sizing(border-box);}

            :focus {
                z-index: 2;
            }

            .login-form {
                margin-top: 60px;
            }

            form[role=login] {
                color: #5d5d5d;
                background: #f2f2f2;
                padding: 26px;
                border-radius: 10px;
                -moz-border-radius: 10px;
                -webkit-border-radius: 10px;
            }

            form[role=login] img {
                display: block;
                margin: 0 auto;
                margin-bottom: 35px;
            }

            form[role=login] input,
            form[role=login] button {
                font-size: 18px;
                margin: 16px 0;
            }

            form[role=login] > div {
                text-align: center;
            }

            .form-links {
                text-align: center;
                margin-top: 1em;
                margin-bottom: 50px;
            }

            .form-links a {
                color: #fff;
            }
        </style>
        <script>
            $(document).ready(function () {
                var msg = "";
                var elements = document.getElementsByTagName("INPUT");

                for (var i = 0; i < elements.length; i++) {
                    elements[i].oninvalid = function (e) {
                        if (!e.target.validity.valid) {
                            switch (e.target.name) {
                                case 'password' :
                                    e.target.setCustomValidity("Password is required");
                                    break;
                                case 'username' :
                                    e.target.setCustomValidity("Username is required");
                                    break;
                                default :
                                    e.target.setCustomValidity("");
                                    break;
                            }
                        }
                    };
                    elements[i].oninput = function (e) {
                        e.target.setCustomValidity(msg);
                    };
                }
            })
        </script>
        <div class="row" id="pwd-container">
            <div class="col-md-4"></div>
            <div class="col-md-4">
                <section class="login-form">
                    <form class="form-signin" action="../login/" method="post" role="login">
                        <input type="text" id="inputUsername" name="username" class="form-control"
                               placeholder="UserName" required="" autofocus="" value="{{ username }}">
                        <input type="password" id="inputPassword" name="password" class="form-control"
                               placeholder="Password" value="" required="">
                        <span style="font-size: 20px; color:red; align-content: center" name="state">{{ state }}</span>

                        <button class="btn btn-lg btn-primary btn-block" type="submit" name="btn_submit">Sign in
                        </button>
                        <div>
                            <a href="{% url 'appointments:register' %}">Create account</a> or <a href="{% url 'appointments:password_reset_form' %}">reset password</a>
                        </div>
                    </form>
                </section>
            </div>
            <div class="col-md-4"></div>
        </div>
{% endblock %}